# Числовые функции. Часть 1

- [Числовые функции. Часть 1](#числовые-функции-часть-1)
  - [Операторы DIV и MOD](#операторы-div-и-mod)
  - [Функция ABS()](#функция-abs)
  - [Функция ROUND()](#функция-round)
  - [Функция POW()](#функция-pow)
  - [Функция SQRT()](#функция-sqrt)
  - [Функция RAND()](#функция-rand)
  - [Примечания](#примечания)
    - [Примечание 1](#примечание-1)
    - [Примечание 2](#примечание-2)

## Операторы DIV и MOD

Оператор `DIV` используется для целочисленного деления одного числа на другое.

Результатом приведенного ниже запроса:

```sql
SELECT 11 DIV 2,
       11 DIV 3,
       11 DIV 4;
```

является:

```sql
+----------+----------+----------+
| 11 DIV 2 | 11 DIV 3 | 11 DIV 4 |
+----------+----------+----------+
| 5        | 3        | 2        |
+----------+----------+----------+
```

Оператор `MOD` используется для вычисления остатка от деления одного числа на другое.

Результатом приведенного ниже запроса:

```sql
SELECT 11 MOD 2,
       11 MOD 3,
       11 MOD 4;
```

является:

```sql
+----------+----------+----------+
| 11 MOD 2 | 11 MOD 3 | 11 MOD 4 |
+----------+----------+----------+
| 1        | 2        | 3        |
+----------+----------+----------+
```

Помимо оператора `MOD`, для вычисления остатка от деления можно использовать оператор `%` или функцию `MOD()`.

Результатом приведенного ниже запроса:

```sql
SELECT 11 MOD 3,
       11 % 3,
       MOD(11, 3);
```

является:

```sql
+----------+--------+------------+
| 11 MOD 3 | 11 % 3 | MOD(11, 3) |
+----------+--------+------------+
| 2        | 2      | 2          |
+----------+--------+------------+
```

## Функция ABS()

Функция `ABS()` используется для вычисления модуля числа. Она принимает в качестве аргумента число и возвращает его модуль.

Результатом приведенного ниже запроса:

```sql
SELECT ABS(-1),
       ABS(-2.1234),
       ABS(0),
       ABS(35);
```

является:

```sql
+---------+--------------+--------+---------+
| ABS(-1) | ABS(-2.1234) | ABS(0) | ABS(35) |
+---------+--------------+--------+---------+
| 1       | 2.1234       | 0      | 35      |
+---------+--------------+--------+---------+
```

## Функция ROUND()

Функция `ROUND()` используется для округления числа. Она принимает два аргумента в следующем порядке:

- `num` — число
- `decimals` — количество знаков после запятой

Функция возвращает число `num`, округленное до `decimals` знаков после запятой.

Результатом приведенного ниже запроса:

```sql
SELECT ROUND(23.1653, 3),
       ROUND(23.1653, 2),
       ROUND(23.1653, 1),
       ROUND(23.1653, 0);
```

является:

```sql
+-------------------+-------------------+-------------------+-------------------+
| ROUND(23.1653, 3) | ROUND(23.1653, 2) | ROUND(23.1653, 1) | ROUND(23.1653, 0) |
+-------------------+-------------------+-------------------+-------------------+
| 23.165            | 23.17             | 23.2              | 23                |
+-------------------+-------------------+-------------------+-------------------+
```

Обратите внимание, что функция `ROUND()` округляет число согласно математическим правилам округления, то есть в большую по модулю сторону.

Результатом приведенного ниже запроса:

```sql
SELECT ROUND(23.165, 2),
       ROUND(-23.165, 2);
```

является:

```sql
+------------------+-------------------+
| ROUND(23.165, 2) | ROUND(-23.165, 2) |
+------------------+-------------------+
| 23.17            | -23.17            |
+------------------+-------------------+
```

Количество знаков после запятой может быть не указано, в таком случае функция `ROUND()` выполнит округление до целого числа.

Результатом приведенного ниже запроса:

```sql
SELECT ROUND(23.3),
       ROUND(23.5),
       ROUND(23.7),
       ROUND(-23.3),
       ROUND(-23.5),
       ROUND(-23.7);
```

является:

```sql
+-------------+-------------+-------------+--------------+--------------+--------------+
| ROUND(23.3) | ROUND(23.5) | ROUND(23.7) | ROUND(-23.3) | ROUND(-23.5) | ROUND(-23.7) |
+-------------+-------------+-------------+--------------+--------------+--------------+
| 23          | 24          | 24          | -23          | -24          | -24          |
+-------------+-------------+-------------+--------------+--------------+--------------+
```

## Функция POW()

Функция `POW()` используется для возведения числа в определенную степень. Она принимает два аргумента в следующем порядке:

- `num` — число
- `degree` — показатель степени

Функция возвращает число `num`, возведенное в степень `degree`.

Результатом приведенного ниже запроса:

```sql
SELECT POW(2, 3),
       POW(3, 5),
       POW(4, 0),
       POW(5, -1);
```

является:

```sql
+-----------+-----------+-----------+------------+
| POW(2, 3) | POW(3, 5) | POW(4, 0) | POW(5, -1) |
+-----------+-----------+-----------+------------+
| 8.0       | 243.0     | 1.0       | 0.2        |
+-----------+-----------+-----------+------------+
```

## Функция SQRT()

Функция `SQRT()` используется для вычисления квадратного корня. Она принимает в качестве аргумента число, извлекает из него квадратный корень и возвращает полученный результат.

Результатом приведенного ниже запроса:

```sql
SELECT SQRT(0),
       SQRT(9),
       SQRT(20);
```

является:

```sql
+---------+---------+------------------+
| SQRT(0) | SQRT(9) | SQRT(20)         |
+---------+---------+------------------+
| 0.0     | 3.0     | 4.47213595499958 |
+---------+---------+------------------+
```

Если переданное в качестве аргумента число меньше нуля, функция `SQRT()` вернет значение `NULL`.

Результатом приведенного ниже запроса:

```sql
SELECT SQRT(-1),
       SQRT(-100);
```

является:

```sql
+----------+------------+
| SQRT(-1) | SQRT(-100) |
+----------+------------+
| NULL     | NULL       |
+----------+------------+
```

## Функция RAND()

Функция `RAND()` используется для генерации случайных чисел. При вызове без аргументов она возвращает случайное число с плавающей точкой в диапазоне `[0, 1)`.

Результатом приведенного ниже запроса:

```sql
SELECT RAND(),
       RAND(),
       RAND();
```

может являться:

```sql
+-------------------+--------------------+---------------------+
| RAND()            | RAND()             | RAND()              |
+-------------------+--------------------+---------------------+
| 0.338787759038422 | 0.8266121575856694 | 0.11669754154672617 |
+-------------------+--------------------+---------------------+
```

Функция может принимать один необязательный аргумент — целое число, определяющее начальное значение при генерации случайного числа. С одним и тем же аргументом функция будет возвращать одно и то же случайное число.

Результатом приведенного ниже запроса:

```sql
SELECT RAND(2),
       RAND(2),
       RAND(3),
       RAND(3);
```

является:

```sql
+--------------------+--------------------+--------------------+--------------------+
| RAND(2)            | RAND(2)            | RAND(3)            | RAND(3)            |
+--------------------+--------------------+--------------------+--------------------+
| 0.6555866465490187 | 0.6555866465490187 | 0.9057697559760601 | 0.9057697559760601 |
+--------------------+--------------------+--------------------+--------------------+
```

## Примечания

### Примечание 1

Помимо функции `ROUND()`, SQL поддерживает две дополнительные функции для округления чисел: `FLOOR()` и `CEILING()`. Первая функция используется для округления числа в меньшую сторону, вторая — в большую сторону.

Результатом приведенного ниже запроса:

```sql
SELECT FLOOR(123.87),
       FLOOR(-11.22),
       CEILING(18.39),
       CEILING(-11.22);
```

является:

```sql
+---------------+---------------+----------------+-----------------+
| FLOOR(123.87) | FLOOR(-11.22) | CEILING(18.39) | CEILING(-11.22) |
+---------------+---------------+----------------+-----------------+
| 123           | -12           | 19             | -11             |
+---------------+---------------+----------------+-----------------+
```

### Примечание 2

Функция `RAND()` в комбинации с операторами `ORDER BY` и `LIMIT` позволяет извлекать из таблицы определенное количество случайных записей.

Предположим, мы работаем с таблицей SQLTeam, которая имеет следующий вид:

```sql
+----+---------+
| id | name    |
+----+---------+
| 1  | Timur   |
| 2  | Arthur  |
| 3  | Valera  |
| 4  | Rustam  |
+----+---------+
```

При необходимости извлечь из этой таблицы, скажем, две случайные записи мы можем сначала отсортировать их с помощью функции `RAND()`, а затем ограничить полученный результат двумя записями.

Результатом приведенного ниже запроса:

```sql
SELECT *
FROM SQLTeam
ORDER BY RAND()
LIMIT 2;
```

является (может отличаться):

```sql
+----+---------+
| id | name    |
+----+---------+
| 1  | Timur   |
| 4  | Rustam  |
+----+---------+
```

Извлечение происходит случайным образом потому, что во время сортировки для каждой записи функция `RAND()` вызывается отдельно. Таким образом, сначала каждой записи сопоставляется определенное случайное число, а затем записи сортируются на основе этих случайных чисел.
