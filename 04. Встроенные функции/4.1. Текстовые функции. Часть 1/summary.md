# Текстовые функции

- [Текстовые функции](#текстовые-функции)
  - [Функции](#функции)
  - [Функция CHAR\_LENGTH()](#функция-char_length)
  - [Функция LOWER()](#функция-lower)
  - [Функция UPPER()](#функция-upper)
  - [Функции LTRIM() и RTRIM()](#функции-ltrim-и-rtrim)
  - [Функция REVERSE()](#функция-reverse)
  - [Функция REPEAT()](#функция-repeat)
  - [Функции LPAD() и RPAD()](#функции-lpad-и-rpad)
  - [Примечания](#примечания)
    - [Примечание 1](#примечание-1)
    - [Примечание 2](#примечание-2)
    - [Примечание 3](#примечание-3)

## Функции

Как и практически любой язык программирования, `SQL` имеет множество встроенных функций, которые позволяют выполнять различные манипуляции с данными. Все встроенные функции можно разбить на четыре основных типа:

1. **Текстовые функции**. Используются для обработки текста, например, для отсечения пробелов или преобразования символов в верхний регистр.
2. **Числовые функции**. Используются для выполнения математических операций над числовыми данными: например, возведения в степень или извлечения квадратного корня.
3. **Функции даты и времени**. Используются для обработки даты и времени, это может быть определение разницы между датами или проверка даты на корректность.
4. **Системные функции**. Используются для получения специфичной для конкретной СУБД информации, к примеру, сведений об учетной записи пользователя.

## Функция CHAR_LENGTH()

Функция `CHAR_LENGTH()` используется для вычисления длины строки. Она принимает в качестве аргумента строку и возвращает количество символов в ней.

Результатом приведенного ниже запроса:

```sql
SELECT CHAR_LENGTH(''),
       CHAR_LENGTH('b'),
       CHAR_LENGTH('bee'),
       CHAR_LENGTH('beegeek');
```

является:

```sql
+-----------------+------------------+--------------------+------------------------+
| CHAR_LENGTH('') | CHAR_LENGTH('b') | CHAR_LENGTH('bee') | CHAR_LENGTH('beegeek') |
+-----------------+------------------+--------------------+------------------------+
| 0               | 1                | 3                  | 7                      |
+-----------------+------------------+--------------------+------------------------+
```

## Функция LOWER()

Функция `LOWER()` используется для перевода строки в нижний регистр. Она принимает в качестве аргумента строку, преобразует все ее символы в нижний регистр и возвращает полученный результат.

Результатом приведенного ниже запроса:

```sql
SELECT LOWER('beegeek'),
       LOWER('BeeGeek'),
       LOWER('BEEGEEK');
```

является:

```sql
+------------------+------------------+------------------+
| LOWER('beegeek') | LOWER('BeeGeek') | LOWER('BEEGEEK') |
+------------------+------------------+------------------+
| beegeek          | beegeek          | beegeek          |
+------------------+------------------+------------------+
```

## Функция UPPER()

Функция `UPPER()` используется для перевода строки в верхний регистр. Она принимает в качестве аргумента строку, преобразует все ее символы в верхний регистр и возвращает полученный результат.

Результатом приведенного ниже запроса:

```sql
SELECT UPPER('beegeek'),
       UPPER('BeeGeek'),
       UPPER('BEEGEEK');
```

является:

```sql
+------------------+------------------+------------------+
| UPPER('beegeek') | UPPER('BeeGeek') | UPPER('BEEGEEK') |
+------------------+------------------+------------------+
| BEEGEEK          | BEEGEEK          | BEEGEEK          |
+------------------+------------------+------------------+
```

## Функции LTRIM() и RTRIM()

Функция `LTRIM()` используется для отсечения ведущих пробелов. Она принимает в качестве аргумента строку, удаляет все пробелы из ее левой части и возвращает полученный результат.

Результатом приведенного ниже запроса:

```sql
SELECT LTRIM(' bee'),
       LTRIM('  bee'),
       LTRIM('   bee');
```

является:

```sql
+---------------+----------------+-----------------+
| LTRIM(' bee') | LTRIM('  bee') | LTRIM('   bee') |
+---------------+----------------+-----------------+
| bee           | bee            | bee             |
+---------------+----------------+-----------------+
```

Похожим образом работает функция `RTRIM()` за исключением того, что она удаляет пробелы из правой части строки, а не левой.

## Функция REVERSE()

Функция `REVERSE()` используется для переворота строки. Она принимает в качестве аргумента строку и возвращает ее с обратным порядком символов.

Результатом приведенного ниже запроса:

```sql
SELECT REVERSE('b'),
       REVERSE('bee'),
       REVERSE('beegeek');
```

является:

```sql
+--------------+----------------+--------------------+
| REVERSE('b') | REVERSE('bee') | REVERSE('beegeek') |
+--------------+----------------+--------------------+
| b            | eeb            | keegeeb            |
+--------------+----------------+--------------------+
```

## Функция REPEAT()

Функция `REPEAT()` используется для повторения строки. Она принимает два аргумента в следующем порядке:

1. `str` — исходная строка
2. `count` — количество повторений

Функция возвращает строку, состоящую из строки `str`, повторяющейся `count` раз.

Результатом приведенного ниже запроса:

```sql
SELECT REPEAT('bee', 1),
       REPEAT('bee', 2),
       REPEAT('bee', 3);
```

является:

```sql
+------------------+------------------+------------------+
| REPEAT('bee', 1) | REPEAT('bee', 2) | REPEAT('bee', 3) |
+------------------+------------------+------------------+
| bee              | beebee           | beebeebee        |
+------------------+------------------+------------------+
```

Если количество повторов меньше 1, то функция `REPEAT()` вернет пустую строку.

Результатом приведенного ниже запроса:

```sql
SELECT REPEAT('bee', 0),
       REPEAT('bee', -1);
```

является:

```sql
+------------------+-------------------+
| REPEAT('bee', 0) | REPEAT('bee', -1) |
+------------------+-------------------+
|                  |                   |
+------------------+-------------------+
```

## Функции LPAD() и RPAD()

Функция `LPAD()` используется для увеличения длины строки до определенного значения путем добавления в ее начало другой строки. Она принимает три аргумента в следующем порядке:

1. `str` — исходная строка
2. `len` — желаемая длина строки
3. `padstr` — дополняющая строка

Функция добавляет строку `padstr` в начало строки `str` до тех пор, пока длина второй не станет равна `len`, и возвращает полученный результат.

Результатом приведенного ниже запроса:

```sql
SELECT LPAD('bee', 5, '-'),
       LPAD('bee', 7, '-'),
       LPAD('bee', 9, '-+');
```

является:

```sql
+---------------------+---------------------+----------------------+
| LPAD('bee', 5, '-') | LPAD('bee', 7, '-') | LPAD('bee', 9, '-+') |
+---------------------+---------------------+----------------------+
| --bee               | ----bee             | -+-+-+bee            |
+---------------------+---------------------+----------------------+
```

Похожим образом себя ведет функция `RPAD()` за исключением того, что она дополняет строку не слева, а справа.

## Примечания

### Примечание 1

Функции могут применяться как в блоке оператора `SELECT`, так и в блоках операторов `WHERE` и `ORDER BY`.

Предположим, во время работы с персональными данными людей нам необходимо выполнить их сортировку по именам, хранящимся в поле name, однако сортировка должна происходить не по прямым значениям имен, а по количеству символов в них. В рамках запроса такой вариант сортировки будет выглядеть следующим образом:

```sql
...
ORDER BY CHAR_LENGTH(name);
```

### Примечание 2

Одним из недостатков функций является то, что в разных СУБД могут применяться разные функции для одних и тех же целей, и лишь некоторые функции в различных СУБД называются одинаково. Общая функциональность доступна в каждой СУБД, но названия функций и их синтаксис могут существенно отличаться.

### Примечание 3

Несмотря на то что функции `CHAR_LENGTH()`, `REVERSE()`, `REPEAT()`, `LPAD()` и `RPAD()` в первую очередь предназначены для работы со строковыми значениями, они также могут обрабатывать и числовые данные.

Результатом приведенного ниже запроса:

```sql
SELECT CHAR_LENGTH(123),
       REVERSE(123),
       REPEAT(123, 2),
       LPAD(123, 4, '-');
```

является:

```sql
+------------------+--------------+----------------+-------------------+
| CHAR_LENGTH(123) | REVERSE(123) | REPEAT(123, 2) | LPAD(123, 4, '-') |
+------------------+--------------+----------------+-------------------+
| 3                | 321          | 123123         | -123              |
+------------------+--------------+----------------+-------------------+
```
