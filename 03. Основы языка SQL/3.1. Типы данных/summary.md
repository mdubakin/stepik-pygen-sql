# Типы данных

- [Типы данных](#типы-данных)
  - [Типы данных](#типы-данных-1)
  - [Строковые типы данных](#строковые-типы-данных)
  - [Числовые типы данных](#числовые-типы-данных)
    - [Целые числа](#целые-числа)
    - [Числа с плавающей точкой](#числа-с-плавающей-точкой)
    - [Числа с фиксированной точкой](#числа-с-фиксированной-точкой)
  - [Типы данных даты и времени](#типы-данных-даты-и-времени)
    - [Типы данных DATETIME и TIMESTAMP](#типы-данных-datetime-и-timestamp)
    - [Способ задания значений](#способ-задания-значений)
  - [Тип данных NULL](#тип-данных-null)
  - [Примечания](#примечания)
    - [Примечание 1](#примечание-1)
    - [Примечание 2](#примечание-2)
    - [Примечание 3](#примечание-3)

## Типы данных

**Типы данных** играют ключевую роль в определении правил хранения и представления информации. Есть несколько причин, почему их использование является необходимым:

- Ограничение диапазона данных. Типы данных позволяют определить, какие значения могут быть сохранены в определенных полях. Например, числовые поля могут принимать только числовые значения, что исключает возможность хранения текста в этих полях.
- Эффективное управление хранением данных. Использование различных типов данных позволяет более компактно хранить информацию. Например, числовые значения и дата/время могут быть сохранены в более оптимизированном формате по сравнению со строковыми.
- Сортировка данных. Множество типов данных позволяет определить собственные правила сравнения для каждого типа. Например, строковые значения сравниваются лексикографически, причем сравнение происходит посимвольно.

При проектировании таблиц необходимо обращать особое внимание на используемые типы данных. Некорректные типы данных могут существенно замедлить работу базы данных, а их изменение для уже имеющихся и заполненных полей может привести к потере данных.

## Строковые типы данных

**Строковые типы данных** используются чаще всего. Значения, принадлежащие этим типам, обычно называют **строками**. К ним относятся хранимые в базах данных имена людей, их фамилии, названия городов и любая подобная текстовая информация.

> В MySQL строковые значения всегда заключаются в одинарные или двойные кавычки.

Строки бывают двух видов: **фиксированной** и **переменной** длины. Строки фиксированной длины состоят из фиксированного количества символов. Например, мы можем разрешить ввод 30 символов в поле, в котором хранятся имена, или 12 символов в поле, предназначенном для хранения ИНН.

Строки переменной длины не имеют фиксированной длины и состоят ровно из того количества символов, сколько указано в них самих. Максимальное значение ограничивается конкретным типом данных.

> Несмотря на то, что строки переменной длины обладают большей гибкостью и хранят столько символов, сколько необходимо, СУБД манипулирует строками фиксированной длины намного быстрее.

Существуют два основных строковых типа данных — CHAR и VARCHAR:

- `CHAR(n)`, где n – число в диапазоне `[0; 255]`, представляющее допустимую длину строки. Хранит строку фиксированной длины, которая задается на этапе создания таблицы. Если строка имеет длину меньше, чем n, то оставшиеся символы заполняются пробелами.
- `VARCHAR(n)`, где n – число в диапазоне `[0; 65535]`, представляющее допустимую длину строки. Хранит строку переменной длины, которая также задается на этапе создания таблицы. В отличие от `CHAR`, строка не заполняется пробелами, если ее длина меньше, чем n.

MySQL поддерживает два режима поведения при превышении указанной длины строки: **строгий** и **нестрогий**. При **нестрогом** режиме если длина строки превосходит значение n, указанное в CHAR(n) или VARCHAR(n), то строка урезается до допустимой длины. В таблице ниже приведены примеры хранения строк разной длины для CHAR(4) и VARCHAR(4).

> При строгом режиме вместо урезания строки возникает ошибка. MySQL по умолчанию использует **строгий** режим.

![char vs varchar](https://i.ibb.co/5sZj9Ck/image.png)

В отличие от типов данных `CHAR(n)` и `VARCHAR(n)`, где мы указываем максимальную длину строки (значение n), мы также можем использовать следующие типы данных:

![other string types](https://i.ibb.co/WDLpHmX/image.png)

> Для этих типов не указывается максимальная длина, она ограничивается только самим типом данных.

## Числовые типы данных

MySQL поддерживает все стандартные числовые типы данных SQL. Каждый из них рассчитан на хранение чисел определенного диапазона. Чем шире поддерживаемый диапазон, тем больше нужно места для хранения числа.

### Целые числа

**Целые числа** хранят только числа без дробной части. Они делятся на числа со знаком (**signed**) и числа без знака (**unsigned**). Типы **signed** позволяют хранить как положительные, так и отрицательные значения, а типы unsigned хранят только положительные числа, но поддерживают больший диапазон значений.

![integers](https://i.ibb.co/cF0hCHs/image.png)

> Числа без знака могут быть полезны в том случае, когда необходимо хранить значения, которые заведомо не могут быть отрицательными (количество товара, возраст человека).

### Числа с плавающей точкой

**Числа с плавающей точкой** хранят приблизительные значения. Они не резервируют определенное количество бит для целочисленной или дробной частей, поэтому у всех значений в таблице количество цифр до и после запятой будет разным.

![floats](https://i.ibb.co/pJXQ9B5/image.png)

### Числа с фиксированной точкой

В MySQL для хранения чисел с фиксированной точкой используются типы `DECIMAL(M, D)` и `NUMERIC(M, D)`. Эти типы являются синонимами, поэтому можно использовать любой из них. Диапазон значений задается параметрами M и D, где M – общее количество цифр, D – количество цифр, используемое для дробной части. Значение параметра M ограничено диапазоном `[1; 65]`.

Например, `DECIMAL(5, 2)` означает, что в поле могут храниться числа, имеющие максимум 5 цифр, причем 2 из них отведены под десятичную часть. Другими словами, в этом поле могут храниться значения в диапазоне `[-999.99; 999.99]`.

> Если для типа `DECIMAL` не указать параметр D или сделать его равным нулю, значения будут округляться до целого числа по правилам математики. Например, 99.5 сохранится со значением 100, а 99.4 —  со значением 99.

## Типы данных даты и времени

Все СУБД поддерживают типы данных, предназначенные для хранения значений даты и времени. Аналогично числовым типам, в большинстве СУБД имеется несколько типов данных даты и времени, каждый из которых имеет свой диапазон.

К основным типам данных даты и времени относятся:

![date types](https://i.ibb.co/QjTsFz6/image.png)

### Типы данных DATETIME и TIMESTAMP

На первый взгляд типы `DATETIME` и `TIMESTAMP` очень похожи. Они предназначены для хранения даты и времени и имеют одинаковый формат. Но у них есть ряд отличий, с помощью которых можно определить, какой из этих типов следует использовать.

`DATETIME` хранит значения от `1000-01-01 00:00:00` до `9999-12-31 23:59:59` включительно и не зависит от временной зоны. Он всегда отображается ровно в таком виде, в котором был установлен и в котором хранится в базе данных. Другими словами, при изменении часового пояса отображение времени не изменится.

`TIMESTAMP` хранит информацию о том, сколько прошло секунд с начала эпохи, то есть с `1970-01-01 00:00:00`. При создании записи в поле, использующем этот тип данных, значение сохраняется по нулевому часовому поясу, а при выборке из базы данных отображается с учетом текущего часового пояса, который задается в настройках операционной системы, где работает MySQL, в глобальных настройках MySQL или в конкретной сессии.

### Способ задания значений

Значения полей, в которых используются типы данных `DATE`, `DATETIME` и `TIMESTAMP`, можно задать одним из следующих способов:

1. Строка в формате `YYYY-MM-DD HH:MM:SS` или `YY-MM-DD HH:MM:SS` для указания даты и времени
2. Строка в формате `YYYY-MM-DD` или в формате `YY-MM-DD` для указания только даты
3. При указании даты (тип данных `DATE`) допускается использовать любой знак пунктуации в качестве разделителя между частями даты. Также допустимо задавать дату и без разделительного знака. Например, следующие записи:

    ```txt
    2023-06-14
    2023.06.14
    2023/06/14
    20230614
    230614
    2023.06/14
    2023/06.14
    ```

    — абсолютно идентичны с точки зрения MySQL, однако при создании будут преобразованы в формат 2023-06-14, поэтому будут храниться и отображаться именно в таком формате.

## Тип данных NULL

**Тип данных `NULL`** — это специальное значение, которое используется в MySQL для обозначения отсутствия данных. Оно отличается от пустой строки или нулевого значения, так как в действительности означает полное отсутствие данных, в то время как ноль является допустимым числовым значением, а пустая строка — допустимой строкой нулевой длины.

> Аналогом значения `NULL` в MySQL можно считать значение None в Python.

## Примечания

### Примечание 1

Одним из поддерживаемых MySQL типов данных является ENUM (перечисление). Поле таблицы с таким типом данных может содержать только те значения, которые были указаны для этого поля при создании таблицы. Например, если для поля, в котором хранится информация о половой принадлежности человека, указать тип данных ENUM со значениями male и female, то попытка установить какие-либо другие значения приведет к ошибке.

### Примечание 2

В разных СУБД могут использоваться разные псевдонимы для типов данных. Например, в MySQL тип INT также может использоваться как INTEGER, а в SQLite — только как INTEGER, но не как INT.

### Примечание 3

Некоторые данные (например, номера телефонов или почтовые индексы) содержат только числа, но это не значит, что они должны храниться в числовых полях. Например, если мы сохраним почтовый индекс 01234 в числовом поле, то сохранено будет число 1234, что приведет к потере первой цифры.
